From 5a75fc14a8bb2a86dca6b4042c2854bcb6b34520 Mon Sep 17 00:00:00 2001
From: Sebastian Bauer <mail@sebastianbauer.info>
Date: Thu, 9 Jul 2015 06:54:37 +0200
Subject: [PATCH 03/35] Disable .machine directive generation.

It breaks manual args to the assembler with different flavor,
e.g., -Wa,-m440. This is probably not the right fix.

This reverts parts of a commit from 2015-03-03.
---
 gcc/config/rs6000/rs6000.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/gcc/config/rs6000/rs6000.c b/gcc/config/rs6000/rs6000.c
index da09e688dd5963fd0d91b9a2956787f07994a4f2..3935559efef48c59b64e5793042df02e3ff40388 100644
--- a/gcc/config/rs6000/rs6000.c
+++ b/gcc/config/rs6000/rs6000.c
@@ -5881,15 +5881,13 @@ rs6000_file_start (void)
 	putc ('\n', file);
     }
 
 #ifdef USING_ELFOS_H
   rs6000_machine = rs6000_machine_from_flags ();
   emit_asm_machine ();
-  /* AmigaOS: This was temporarily disabled to not override e.g., -mcpu=440 */
-  /* Not entirely sure why, but there might be a good reason so consider this
-   * a FIXME. Refer to patches for gcc <= 9. */
+  /* AmigaOS: FIXME: The 'Disable .machine directive generation' is temporarily disabled. */
 #endif
 
   if (DEFAULT_ABI == ABI_ELFv2)
     fprintf (file, "\t.abiversion 2\n");
 }
 
-- 
2.20.1

